!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,a){for(var o,s,c=0,d=[];c<i.length;c++)s=i[c],r[s]&&d.push.apply(d,r[s]),r[s]=0;for(o in a)e[o]=a[o];for(n&&n(i,a);d.length;)d.shift().call(null,t)};var i={},r={1:0};return t.e=function(e,n){if(0===r[e])return n.call(null,t);if(void 0!==r[e])r[e].push(n);else{r[e]=[n];var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.src=t.p+""+e+"."+({}[e]||e)+".min.js",i.appendChild(a)}},t.m=e,t.c=i,t.p="",t(0)}([function(e,t,n){"use strict";n.p=Sorna.assetRoot,n.p=Sorna.assetRoot+"js/",window.Sorna=window.Sorna||{version:"0.2.0"};var i=function(e){n.e(2,function(){window.fabric=n(27).fabric,e()})};Sorna.Media={_insert_media_script:function(e,t,n){if(document.getElementById(e))return!0;var i,r=document.getElementsByTagName("script")[0];return i=document.createElement("script"),i.id=e,i.onload=n,i.async=!0,i.src=t,r.parentNode.insertBefore(i,r),!1},_get_drawing_impl:function(){return{scripts:[{id:"js.common-fabric",loader:i},{id:"js.sorna-drawing",url:Sorna.assetRoot+"js/drawing.min.js"}],handler:function(e,t,n,i){Sorna.Drawing.update(e,t,n,i)}}},_get_image_impl:function(){return{scripts:[],handler:function(e,t,n,i){var r=document.getElementById(e);r||(r=document.createElement("img"),r.id=e,r.alt="generated image",i.appendChild(r)),r.src=n}}},_get_svg_impl:function(){return{scripts:[{id:"js.common-fabric",loader:i}],handler:function(e,t,n,i){var r=document.getElementById(e);r||(r=document.createElement("canvas"),r.id=e,i.appendChild(r));var a=new fabric.Canvas(e,{width:0,height:0});r.getContext("2d").scale(window.devicePixelRatio,window.devicePixelRatio),fabric.loadSVGFromString(n,function(e,t){t.selectable=!1;var n=fabric.util.groupSVGElements(e,t);a.on("mouse:up",function(e){var t=a.toSVG(),n=document.createElement("a");n.href="data:image/svg+xml,"+encodeURIComponent(t),n.target="_blank",n.click()}),a.setWidth(n.width||600),a.setHeight(n.height||600),a.add(n),a.renderAll()})}}},_get_media_impls:function(){var e=this._get_image_impl();return{"application/x-sorna-drawing":this._get_drawing_impl(),"image/svg+xml":this._get_svg_impl(),"image/png":e,"image/jpeg":e,"image/gif":e}},handle_all:function(e,t,n){for(var i=0;i<e.length;i++){var r=e[i],a=this._get_media_impls()[r[0]];if(void 0!=a){for(var o=[],s=0;s<a.scripts.length;s++)if(void 0!==a.scripts[s].url){var c=this._insert_media_script;o.push(new Promise(function(e,t){c(a.scripts[s].id,a.scripts[s].url,e)&&e()}))}else o.push(new Promise(function(e,t){a.scripts[s].loader(e)}));Promise.all(o).then(function(){a.handler(t+"-"+i,r[0],r[1],n)})}}}}}]);
//# sourceMappingURL=main.min.js.map